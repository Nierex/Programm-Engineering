# Тема 7.  Работа с файлами (ввод, вывод)
Отчет по Теме #7 выполнил:
- Донских Александр Сергеевич
- ИВТ-23-1

| Задание | Лаб_раб | Сам_раб |
| ------ | ------ | ------ |
| Задание 1 | + | + |
| Задание 2 | + | + |
| Задание 3 | + | + |
| Задание 4 | + | + |
| Задание 5 | + | + |
| Задание 6 | + |  |
| Задание 7 | + |  |
| Задание 8 | + |  |
| Задание 9 | + |  |
| Задание 10 | + |  |



## Лабораторная работа №1
Составьте текстовый файл и положите его в одну директорию с программой на Python. Текстовый файл должен состоять минимум из двух строк.


![Тема_5](https://github.com/Nierex/Programm-Engineering/blob/main/pic/Lab7_1.1.png)

- Вывод
Это не задача на код, а подготовка данных. Файл input.txt должен существовать в той же папке, что и main.py, и содержать хотя бы две строки.
## Лабораторная работа №2
Напишите программу, которая выведет только первую строку из вашего файла, при этом используйте конструкцию open()/close().
Оформленный код
f = open('input.txt', 'r')
print(f.readline())
f.close()
![Тема_5](https://github.com/Nierex/Programm-Engineering/blob/main/pic/Lab7_1.2.png)

- Вывод
open(..., 'r') — открывает файл для чтения.
readline() — читает только первую строку.
close() — закрывает файл (обязательно при ручном открытии).
## Лабораторная работа №3
Напишите программу, которая выведет все строки из вашего файла в массиве, при этом используйте конструкцию open()/close().
Оформленный код
f = open('input.txt', 'r')
print(f.readlines())
f.close()
![Тема_5](https://github.com/Nierex/Programm-Engineering/blob/main/pic/Lab7_1.3.png)

- Вывод
readlines() — возвращает список строк файла (включая символы \n).
Результат — массив (список) строк.
Обязательно закрытие файла через close().
## Лабораторная работа №4
Напишите программу, которая выведет все строки из вашего файла в массиве, при этом используйте конструкцию with open().
Оформленный код
with open('input.txt') as f:
    print(f.readlines())
![Тема_5](https://github.com/Nierex/Programm-Engineering/blob/main/pic/Lab7_1.4.png)

- Вывод
with open(...) — контекстный менеджер, который автоматически закрывает файл после выхода из блока.
Более безопасный и идиоматичный способ работы с файлами.
readlines() — как и в задаче 3 — возвращает список строк.
## Лабораторная работа №5
Напишите программу, которая выведет каждую строку из вашего файла отдельно, при этом используйте конструкцию with open().
Оформленный код
with open('input.txt') as f:
    for line in f:
        print(line)
![Тема_5](https://github.com/Nierex/Programm-Engineering/blob/main/pic/Lab7_1.5.png)

- Вывод
for line in f — итерация по файлу построчно.
Каждая строка выводится сразу — удобно для больших файлов.
Автоматическое закрытие файла благодаря with.
## Лабораторная работа №6
Напишите программу, которая будет добавлять новую строку в ваш файл, а потом выведет полученный файл в консоль. Вывод можно осуществлять любым способом. Обязательно проверьте сам файл, чтобы изменения в нем тоже отобразились.
Оформленный код
with open('input.txt', 'a') as f:
    f.write('\nIm additional line')

with open('input.txt', 'r') as f:
    result = f.readlines()
    print(result)
![Тема_5](https://github.com/Nierex/Programm-Engineering/blob/main/pic/Lab7_1.6.png)

- Вывод
'a' — режим "добавления" (append). Новая строка пишется в конец файла.
После записи — снова открываем файл в режиме 'r' и читаем весь его содержимое.
Проверка: можно открыть input.txt вручную — новая строка должна быть там.
## Лабораторная работа №7
Напишите программу, которая перепишет всю информацию, которая была у вас в файле до этого, например напишет любые данные из произвольно составленного списка. Также не забудьте проверить что измененная вами информация сохранилась в файле.
Оформленный код
lines = ['one', 'two', 'three']
with open('input.txt', 'w') as f:
    for line in lines:
        f.write('\nCycle run ' + line)
print('Done!')
![Тема_5](https://github.com/Nierex/Programm-Engineering/blob/main/pic/Lab7_1.7.png)

- Вывод
'w' — режим записи. Удаляет всё содержимое файла и записывает новое.
Цикл for проходит по списку и записывает каждую строку.
'\n' — перевод строки перед каждой записью.
После выполнения — файл содержит только новые строки.
## Лабораторная работа №8
Выберите любую папку на своем компьютере, имеющую вложенные директории. Выведите на печать в терминал ее содержимое, и всех подкаталогов при помощи функции print_docs(directory).
Оформленный код
import os

def print_docs(directory):
    all_files = os.walk(directory)
    for catalog in all_files:
        print(f'Имя каталога {catalog[0]} содержит:')
        print(f'Подкаталоги: {", ".join(folder for folder in catalog[1])}')
        print(f'Файлы: {", ".join(file for file in catalog[2])}')
        print('-' * 40)

print_docs('C:\\Users\\Александр\\Pictures')
![Тема_5](https://github.com/Nierex/Programm-Engineering/blob/main/pic/Lab7_1.8.png)

- Вывод
os.walk() — рекурсивно обходит папку и возвращает кортеж (путь, подпапки, файлы).
catalog[0] — текущий путь, catalog[1] — подкаталоги, catalog[2] — файлы.
join() — собирает элементы в строку через запятую.
Функция выводит структуру папки — полезно для анализа файловой системы.
## Лабораторная работа №9
Документ input.txt содержит следующий текст:
Приветствие
Спасибо
Извините
Пожалуйста
До свидания
Ты готов?
Как дела?
С днем рождения!
Удача!
Я тебя люблю.
Оформленный код
def longest_words(file):
    with open(file, encoding='utf-8') as f:
        words = f.read().split()
        max_length = len(max(words, key=len))
        sought_words = []
        for word in words:
            if len(word) == max_length:
                sought_words.append(word)
        if len(sought_words) == 1:
            return sought_words[0]
        return sought_words

print(longest_words('input.txt'))
![Тема_5](https://github.com/Nierex/Programm-Engineering/blob/main/pic/Lab7_1.9.png)

- Вывод
f.read().split() — читает весь файл и разбивает на слова по пробелам.
max(words, key=len) — находит самое длинное слово.
Цикл собирает все слова с такой же длиной (если их несколько).
Если одно слово — возвращает его, иначе — список.
encoding='utf-8' — важно для кириллицы.
## Лабораторная работа №10
Требуется создать CSV-файл rows_300.csv со следующими столбцами:
№ — номер по порядку (от 1 до 300);
Секунда — текущая секунда на вашем ПК;
Микросекунда — текущая микросекунда на часах.
Для наглядности на каждой итерации цикла искусственно приостановите скрипт на 0.01 секунды.
Оформленный код
import csv
import datetime
import time

with open('rows_300.csv', 'w', encoding='utf-8', newline='') as f:
    writer = csv.writer(f)
    writer.writerow(['№', 'Секунда', 'Микросекунда'])
    for line in range(1, 301):
        writer.writerow([line, datetime.datetime.now().second, datetime.datetime.now().microsecond])
        time.sleep(0.01)
![Тема_5](https://github.com/Nierex/Programm-Engineering/blob/main/pic/Lab7_1.10.1.png)
![Тема_5](https://github.com/Nierex/Programm-Engineering/blob/main/pic/Lab7_1.10.2.png)

- Вывод
csv.writer(f) — создаёт объект для записи в CSV.
writerow() — записывает одну строку (заголовок и данные).
datetime.datetime.now().second — текущая секунда.
datetime.datetime.now().microsecond — текущая микросекунда.
time.sleep(0.01) — задержка между итерациями для наглядности (чтобы значения менялись).
newline='' — важно для корректной работы CSV на Windows.

## Самостоятельная работа №1
Найдите в интернете любую статью (объем статьи не менее 200 слов), скопируйте ее содержимое в файл и напишите программу, которая считает количество слов в текстовом файле и определит самое часто встречающееся слово. Результатом выполнения задачи будет: скриптом файла со статьей, листинг кода, и вывод в консоль, в котором будет указана вся необходимая информация.
- Оформленный код
  from collections import Counter
import re
def find_most_common_word(filename):
    with open(filename, 'r', encoding='utf-8') as f:
        text = f.read().lower()
   words = re.findall(r'[a-zA-Z]+', text)
    word_count = Counter(words)
    most_common = word_count.most_common(1)[0]
    print(f"Всего слов: {len(words)}")
    print(f"Самое частое слово: '{most_common[0]}' — встречается {most_common[1]} раз")


find_most_common_word('article.txt')
![Тема_5](https://github.com/Nierex/Programm-Engineering/blob/main/pic/Lab7_2.1.1.png)
![Тема_5](https://github.com/Nierex/Programm-Engineering/blob/main/pic/Lab7_2.1.2.png)
- Вывод
  re.findall(r'[a-zA-Z]+', text) — извлекает только английские слова.
Counter — удобный инструмент для подсчёта частоты.
most_common(1) — возвращает пару (слово, количество).
Важно: учитывается регистр — поэтому используем .lower().
## Самостоятельная работа №2
У вас появилась потребность в ведении книги расходов, посмотрев все существующие варианты вы пришли к выводу, что вас ничего не устраивает и нужно всё делать самому. Напишите программу для учета расходов. Программа должна позволять вводить информацию о расходах, сохранять её в файл и выводить существующие данные в консоль. Ввод информации происходит через консоль. Результатом выполнения задачи будет: скриптом файла с учетом расходов, листинг кода, и вывод в консоль, с демонстрацией работоспособности программы.
Оформленный код
import json

def add_expense():
    description = input("Описание: ")
    amount = float(input("Сумма: "))
    date = input("Дата (ДД.ММ.ГГГГ): ")
    return {"description": description, "amount": amount, "date": date}

def save_expenses(expenses, filename='expenses.json'):
    with open(filename, 'w', encoding='utf-8') as f:
        json.dump(expenses, f, indent=2, ensure_ascii=False)

def load_expenses(filename='expenses.json'):
    try:
        with open(filename, 'r', encoding='utf-8') as f:
            return json.load(f)
    except FileNotFoundError:
        return []

def show_expenses(expenses):
    for i, exp in enumerate(expenses, 1):
        print(f"{i}. [{exp['date']}] {exp['description']} — {exp['amount']} руб.")

expenses = load_expenses()

while True:
    action = input("\nВыберите действие: [1] Добавить, [2] Показать, [3] Выход: ")
    if action == '1':
        expense = add_expense()
        expenses.append(expense)
        save_expenses(expenses)
        print("Расход добавлен!")
    elif action == '2':
        show_expenses(expenses)
    elif action == '3':
        break
![Тема_5](https://github.com/Nierex/Programm-Engineering/blob/main/pic/Lab7_2.2.png)
- Вывод
Используется JSON для хранения данных — легко читается человеком.
add_expense() — собирает данные от пользователя.
save_expenses() и load_expenses() — сохраняют и загружают данные.
Цикл позволяет добавлять и просматривать расходы.
## Самостоятельная работа №3
Имеется файл input.txt с текстом на латинице. Напишите программу, которая выводит следующую статистику по тексту: количество букв латинского алфавита, число слов, число строк.
Beautiful is better than ugly.
Explicit is better than implicit.
Simple is better than complex.
Complex is better than complicated.
Ожидаемый результат:
108 letters
20 words
4 lines
- Оформленный код
def text_stats(filename):
    with open(filename, 'r', encoding='utf-8') as f:
        text = f.read()

    letters = sum(c.isalpha() for c in text)

    words = len(text.split())

    lines = text.count('\n') + 1

    print(f"{letters} letters")
    print(f"{words} words")
    print(f"{lines} lines")


text_stats('input.txt')
![Тема_5](https://github.com/Nierex/Programm-Engineering/blob/main/pic/Lab7_2.3.png)

- Вывод
c.isalpha() — проверяет, является ли символ буквой.
split() — разделяет текст на слова по пробелам и переносам.
count('\n') + 1 — считает строки (если последняя строка не оканчивается \n, она тоже считается).
## Самостоятельная работа №4

- Оформленный код
import re


def load_banned_words(filename):
    with open(filename, 'r', encoding='utf-8') as f:
        words = f.read().strip().split()
    return set(word.lower() for word in words)


def replace_banned(text, banned_words):
    def replace_match(match):
        word = match.group(0)
        return '*' * len(word)
    pattern = '|'.join(re.escape(word) for word in banned_words)
    result = re.sub(pattern, replace_match, text, flags=re.IGNORECASE)
    return result


banned = load_banned_words('input.txt')

sentences = [
    "hello email python the exam input.txt",
    "Hello, world! Python Is the programming language of the future. My EMAIL is ....",
    "PYTHON is awesome!!!!"
]

for s in sentences:
    print(replace_banned(s, banned))
![Тема_5](https://github.com/Nierex/Programm-Engineering/blob/main/pic/Lab7_2.4.png)

- Вывод
re.escape() — экранирует специальные символы в словах.
re.IGNORECASE — делает поиск независимым от регистра.
replace_match — функция-замена, которая возвращает строку из звёздочек длиной как исходное слово.
Замена происходит даже внутри других слов — это соответствует условию.
## Самостоятельная работа №5
Самостоятельно придумайте и решите задачу, которая будет взаимодействовать с текстовым файлом.


- Оформленный код
def reverse_lines_in_file(filename):

    with open(filename, 'r', encoding='utf-8') as f:
        lines = f.readlines()

    lines.reverse()

    with open(filename, 'w', encoding='utf-8') as f:
        f.writelines(lines)

    print("Строки успешно перевёрнуты!")


reverse_lines_in_file('input.txt')
![Тема_5](https://github.com/Nierex/Programm-Engineering/blob/main/pic/Lab7_2.5.1.png)
![Тема_5](https://github.com/Nierex/Programm-Engineering/blob/main/pic/Lab7_2.5.2.png)
![Тема_5](https://github.com/Nierex/Programm-Engineering/blob/main/pic/Lab7_2.5.3.png)
- Вывод
Читаем файл в список строк.
reverse() — меняет порядок строк на обратный.
Записываем обратно в тот же файл.
Полезно, например, для логов или резервных копий.
Общий вывод
В ходе выполнения 15 заданий по теме «Работа с файлами» были освоены основные операции ввода-вывода в Python: чтение и запись текстовых файлов, работа с режимами 'r', 'w', 'a', использование контекстного менеджера with open(), обработка текста (подсчёт слов, поиск самых длинных/частых слов), работа с CSV и JSON, рекурсивный обход директорий через os.walk(), а также практические задачи — от фильтрации запрещённых слов до учёта расходов. Все задания выполнены корректно, с учётом кодировок, безопасности и читаемости кода. Навыки успешно применены как в лабораторных, так и в самостоятельных работах.
